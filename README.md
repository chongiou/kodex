# Kodex

Kodex æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ DSL UI æ¸²æŸ“å¼•æ“ï¼Œå®ƒé€šè¿‡ JSX è¿™ç§å£°æ˜å¼è¯­æ³•ï¼Œå°† UI æè¿°è½¬æ¢ä¸ºç›®æ ‡ç¯å¢ƒ( `zdjl` )çš„å…·ä½“å®ç°ï¼Œæä¾›äº†ä»ç»„ä»¶å®šä¹‰åˆ°æœ€ç»ˆæ¸²æŸ“çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

<div align="center">

[![CodeFactor](https://www.codefactor.io/repository/github/chongiou/kodex/badge)](https://www.codefactor.io/repository/github/chongiou/kodex)
![npm version](https://img.shields.io/npm/v/@zdjl/kodex)
![npm downloads](https://img.shields.io/npm/dm/@zdjl/kodex)
![CI/CD](https://img.shields.io/github/actions/workflow/status/chongiou/kodex/.github/workflows/release.yml)
![TypeScript](https://img.shields.io/badge/TypeScript-5.8+-blue)

</div>

## ğŸŒ±ç¤¾åŒºèµ„æº

- [1027734941](https://qm.qq.com/q/k5IkZNKJ3i)ï¼šå®˜æ–¹äº¤æµç¾¤

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ä½œç”¨åŸŸäº’é€š**: æ‰“é€šäº†å¼¹çª—è¡¨è¾¾å¼ä¸åŠ¨ä½œçš„ä½œç”¨åŸŸ
- **å“åº”å¼æ•°æ®ç»‘å®š**: è‡ªåŠ¨åŒæ­¥æ•°æ®å˜åŒ–ä¸ç•Œé¢æ›´æ–°
- **ç»„ä»¶åŒ–å¼€å‘**: ä½¿ç”¨å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤æ‚ç•Œé¢
- **å£°æ˜å¼è¯­æ³•**: ç”¨ç®€æ´çš„æ ‡è®°è¯­è¨€æè¿°ç•Œé¢ç»“æ„
- **äº‹ä»¶å¤„ç†**: æŒ‰é’®äº¤äº’ä¸å€¼æ›´æ”¹äº‹ä»¶å“åº”
- **å¹²å‡€çš„å¼€å‘ç©ºé—´**: ä¸ä¼šæ‰“æ‰°ä½ çš„å…¨å±€å¯¹è±¡å’Œè„šæœ¬ä½œç”¨åŸŸ

## ğŸš€ å¿«é€Ÿä½“éªŒ
ä½¿ç”¨ `kodex` å¯ä»¥ä¸å¿…ç»è¿‡ç¼–è¯‘æ­¥éª¤ï¼Œå¯ä»¥ä½¿ç”¨ç‹¬ç«‹å·¥å…·è§£æ `JSX` å­—ç¬¦ä¸²ï¼Œå› æ­¤ä½ å¯ä»¥ç›´æ¥åœ¨è‡ªåŠ¨ç²¾çµç¯å¢ƒï¼Œæƒ³è¦å¿«é€Ÿä½“éªŒåªéœ€è¦è¿è¡Œä¸‹é¢çš„ä»£ç å³å¯ã€‚
> [!NOTE] 
> âš ï¸ è¯·æ³¨æ„ï¼Œè™½ç„¶ `/zdjl/index.min.cjs` å¾ˆå°ï¼Œä¸åˆ° `23kb` ï¼Œç»ç½‘ç»œå‹ç¼©(gzip)åä¸åˆ° `10kb` ï¼Œä½†ä»ç„¶éœ€è¦æ‚¨çš„ç½‘ç»œæƒ…å†µè‰¯å¥½ã€‚

```js
globalThis.zdjl = zdjl // è®©æ¨¡å—èƒ½è®¿é—®åˆ°
const { 
  parseJSX: jsx,
  createSignal, 
  render,
} = require(`@zdjl/kodex@latest/dist/zdjl/index.min.cjs`)

function MyComponent (props) {
  return jsx`<text extraTextAbove=${props.tip}>${props.children}</text>`
}

function Counter () {
  const [count, setCount] = createSignal(0)

  return jsx`
    <>
      <input type='text' name='user_in' value=${count}></input>
      <${MyComponent} tip='è®¡æ•°:'>${count}<//>
      <button onClick=${() => setCount(count() + 1)}>å¢åŠ è®¡æ•°</button>
    </>
  `
}

const counterDialog = render(jsx`<${Counter}><//>`)
const res = await counterDialog.show()
zdjl.alert(JSON.stringify(res.input, null, 2)) // -> { "user_in": number }
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬æ¦‚å¿µ

- **ç»„ä»¶ (Component)**: ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ UI å•å…ƒï¼Œç±»ä¼¼ HTML æ ‡ç­¾ä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚  
- **å“åº”å¼æ•°æ®**: å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç•Œé¢ä¼šè‡ªåŠ¨æ›´æ–°ä»¥åæ˜ è¿™äº›å˜åŒ–ã€‚  
- **äº‹ä»¶å¤„ç†**: å½“ç”¨æˆ·ä¸ç•Œé¢äº¤äº’æ—¶ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰ï¼Œå¯ä»¥è§¦å‘ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚
- **JSX**: JS çš„æ‰©å±•è¯­æ³•, å®ƒå…è®¸ä½ åœ¨ JS ä¸­ä½¿ç”¨ç±»ä¼¼ HTML çš„è¯­æ³•, ä½†æœ€ç»ˆéœ€è¦è½¬æ¢ä¸º JS å‡½æ•°æ‰èƒ½è¿è¡Œ

## å®‰è£…

```shell
npm i @zdjl/kodex
```

## å¯¼å…¥

```js
import {} from '@zdjl/kodex'
```

å¦‚æœä½ ä¸ç†Ÿæ‚‰ ESM çš„æ¨¡å—è¯­æ³•è¯·æŸ¥çœ‹ MDN çš„ [import](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import) å’Œ [export](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export) æ–‡æ¡£ 

## é…ç½®å¼€å‘ç¯å¢ƒ
[é…ç½®å¼€å‘ç¯å¢ƒ](./docs/DevEnvSetup.md)

> [!NOTE]
> âš ï¸ ä½¿ç”¨ kodex å¹¶ä¸æ˜¯å¿…é¡»ç»è¿‡ç¼–è¯‘ç¯èŠ‚ã€‚ä½¿ç”¨æ‰‹æœºå¼€å‘çš„ç”¨æˆ·è¯·ç›´æ¥æŸ¥çœ‹ "é…ç½®å¼€å‘ç¯å¢ƒ" æ–¹å¼äºŒ

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªç•Œé¢

```jsx
import { render, createSignal } from '@zdjl/kodex'

// å®šä¹‰æ ¹ç»„ä»¶
function Counter() {
  const [count, setCount] = createSignal(0)
  return (
    <button onClick={() => setCount(prev => prev + 1)}>Count is: {count}</button>
  )
}

// æ¸²æŸ“ç•Œé¢
const result = await render(<Counter />).show()
```

> Counter æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œè¿™ä¸ªæ¦‚å¿µåœ¨ å­¦ä¹  Kodex ä¸­ä¼šæåˆ°

### æ•ˆæœ

![æ•ˆæœ](./docs/images/counter-example.gif)

### ğŸ” è®©æˆ‘ä»¬çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ

1. åˆ›å»ºäº†ä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„å“åº”å¼æ•°æ®æº count ä¿¡å·ï¼ˆSignalï¼‰ã€‚è¿”å› getter å’Œ setter ç”¨äºè¯»å–å’Œæ›´æ–°ä¿¡å·
   
   ```jsx
   const [count, setCount] = createSignal(0)
   ```

2. button å¼•ç”¨äº†è¿™ä¸ªæ•°æ® `Count is: {count}`
   
   ```jsx
   <button ... >Count is: {count}</button>
   ```
   
3. button åœ¨å…¶ç‚¹å‡»äº‹ä»¶å†…ä¿®æ”¹äº†æ•°æ® `onClick={() => setCount(prev => prev + 1)}`
   
   ```jsx
   <button onClick={() => setCount(prev => prev + 1)}> ... </button>
   ```

4. æ¯æ¬¡ç‚¹å‡»æ—¶æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°  `() => setCount(prev => prev + 1)`ï¼Œå³ä½¿ç”¨ä¹‹å‰çš„å€¼å¹¶åŠ  1

5. æ¯æ¬¡ä¿®æ”¹ä¿¡å·åï¼ŒUI ç«‹å³ååº”å…¶å˜åŒ–

### ğŸ‰ So easy, right?

æƒ³è±¡ä¸€ä¸‹ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹å¼éœ€è¦å‡ ä¸ªæ­¥éª¤ï¼Ÿä¸‹ä¸€æ­¥ï¼Œå¼€å§‹å­¦ä¹  Kodex  ç”¨æ³•ï¼

## ğŸ“– å­¦ä¹  Kodex

[å­¦ä¹  Kodex](./docs/Tutorial.md)

## ğŸ“œ API å‚è€ƒ

[API å‚è€ƒ](./docs/APIReference.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ PR å’Œ Issue

## âš–ï¸è®¸å¯è¯

MIT

## TODO
- [x] å€¼æ›´æ”¹äº‹ä»¶ï¼šonChangeå±æ€§
- [x] å·²å¼¹çª—å›è°ƒï¼šç”Ÿå‘½å‘¨æœŸ onMount å‡½æ•°
- [x] ä¸è‡ªåŠ¨ç²¾çµ API äº¤äº’ï¼š
  - [x] æå‡ä¿¡å·åˆ°å½“å‰ä½¿ç”¨çš„æ¸²æŸ“å™¨ä¸“ç”¨ä½œç”¨åŸŸ
  - [x] æå‡å‡½æ•°åˆ°å½“å‰ä½¿ç”¨çš„æ¸²æŸ“å™¨ä¸“ç”¨ä½œç”¨åŸŸ
- [x] å®ç°å¸ƒå±€ç»„ä»¶ - Row, ä¸åŒ…å«åœ¨æ ¸å¿ƒåŒ…ä¸­
- [x] å®ç°æ¡ä»¶æ˜¾ç¤ºç»„ä»¶ - Switch å’Œ Show ç»„ä»¶, ä¸åŒ…å«åœ¨æ ¸å¿ƒåŒ…ä¸­
- [ ] æ‰©å±•æ›´å¤šå˜é‡ç±»å‹
  > 1. kodex çš„ç›®æ ‡æ˜¯åˆ›å»ºåŸºäºå¯¹è¯æ¡†çš„UI, è€Œä¸æ˜¯é‡æ–°å®ç°è‡ªåŠ¨ç²¾çµçš„å˜é‡ç³»ç»Ÿ  
  > 2. ç”±äºå†…éƒ¨ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è½¬æ¢ `jsx` ç»“æ„åˆ°è‡ªåŠ¨ç²¾çµå˜é‡ç»“æ„, å®ç°å¹¶ä¸å›°éš¾, ä½†ä¹Ÿéœ€è¦ç²¾åŠ›å’Œæ—¶é—´
  > 3. åŸºäºä»¥ä¸Šè¯„ä¼°ä¼˜å…ˆçº§, å¯åœ¨ç¾¤é‡Œè®¨è®ºä¸ºä»€ä¹ˆåº”è¯¥å®ç°xxxå˜é‡ç±»å‹ä»¥é‡æ–°è¯„ä¼°  
  - [x] å­—ç¬¦
  - [x] æ•°å€¼
  - [x] å¸ƒå°”
  - [ ] åæ ‡ ä½ç½®ç±»å‹
      - [x] åæ ‡
      - [ ] å›¾ç‰‡ - ä½ä¼˜å…ˆçº§
      - [ ] æ–‡å­— - ä½ä¼˜å…ˆçº§
      - [ ] é¢œè‰² - ä½ä¼˜å…ˆçº§
      - [ ] èŠ‚ç‚¹ - ä½ä¼˜å…ˆçº§
  - [ ] èŠ‚ç‚¹
  - [ ] è¯†åˆ«å±å¹•
  - [ ] è„šæœ¬åŠ¨ä½œ
  - [ ] è„šæœ¬è¿è¡Œæ¡ä»¶
  - [ ] é“¾æ¥å†…å®¹
  - [x] JSè¡¨è¾¾å¼
  - [ ] JSå‡½æ•°
  - [x] é”®å€¼å¯¹è±¡
  - [ ] æ•°ç»„(å­—ç¬¦)
  - [ ] æ•°ç»„(æ•°å€¼)
  - [ ] æ•°ç»„(è„šæœ¬åŠ¨ä½œ)
  - [ ] å±å¹•åŒºåŸŸ
  - [ ] é¢œè‰²
  - [x] æ–‡ä»¶è·¯å¾„
  - [x] æ–‡æœ¬
  - [ ] å›¾ç‰‡
  - [x] æŒ‰é’®
  - [ ] åˆ é™¤å˜é‡ - æ— è®¡åˆ’
- [ ] å¼€æ”¾ç”¨æˆ·æ‰©å±•æ‰‹æ®µï¼š
  - [ ] è‡ªå®šä¹‰é€‚é…å™¨
  - [ ] é€‚é…å‰å’Œé€‚é…åé’©å­
- [x] å®ç°å…·åä¿¡å· - ç”¨äºåœ¨æœ€ç»ˆç»“æœä¸­å–å¾—å…¶å€¼
- [x] å®ç°é‡æ¸²æŸ“

## è¿™æ€ä¹ˆå¯èƒ½?
(TODO:æ­¤ä¸»é¢˜ä»‹ç»åŸç†å’Œå®ç°ç»†èŠ‚,å¾…å®Œæˆ)
> æƒ³è¦æˆ‘è¯´äº›ä»€ä¹ˆï¼Ÿå¯ä»¥åœ¨è‡ªåŠ¨ç²¾çµè¯„è®ºåŒºæˆ–ç¾¤å†…è®¸æ„¿
